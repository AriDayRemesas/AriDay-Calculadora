<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AriDay Remesas</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 1.5rem;
      background: #f5f5f5;
    }
    .card {
      background: #fff;
      max-width: 400px;
      margin: auto;
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      margin: 0;
      font-size: 1.5rem;
    }
    p.subtitle {
      margin: 0.2rem 0 1rem;
      font-size: 0.9rem;
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }
    select, input, button {
      width: 100%;
      margin-top: 0.5rem;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 0.5rem;
      font-size: 1rem;
      box-sizing: border-box;
    }
    .result {
      margin-top: 1.2rem;
      font-weight: bold;
      font-size: 1.1rem;
      color: #1a73e8;
    }
  </style>
</head>
<body>

  <div class="card">
    <h2>üåê AriDay Remesas</h2>
    <p class="subtitle">
      <a href="https://wa.me/5491165218910" target="_blank" style="text-decoration:none; color:#1a73e8;">
        WhatsApp: +54 9 11 6521 8910
      </a>
    </p>

    <label for="direction">Seleccione direcci√≥n de conversi√≥n:</label>
    <select id="direction">
      <option value="arsToCup">De ARS a CUP</option>
      <option value="cupToArs">De CUP a ARS</option>
    </select>

    <label for="amount">Ingrese monto:</label>
    <input type="number" id="amount" placeholder="Ej: 15000" />

    <div class="result" id="resultText"></div>
    <button onclick="calculate()">Calcular</button>
  </div>

  <script>
    // Par√°metros fijos
    const MIN_ARS = 12000;    // 12.000 ARS = 3.243 CUP
    const MIN_CUP = 3243;
    const THRESHOLD_CUP = 100000;   // 100.000 CUP
    const THRESHOLD_ARS = 363000;   // 363.000 ARS
    const RATE_MIN = 3.69;    // tasa 1 CUP = 3,69 ARS (m√≠nimo)
    const RATE_MAX = 3.63;    // tasa 1 CUP = 3,63 ARS (a partir de 100.000 CUP)

    // Calcula tasa progresiva (interpolaci√≥n lineal) si cup ‚àà [MIN_CUP, THRESHOLD_CUP]
    function rateForCup(cup) {
      if (cup <= MIN_CUP) {
        return RATE_MIN;
      }
      if (cup >= THRESHOLD_CUP) {
        return RATE_MAX;
      }
      // Interpolaci√≥n lineal entre (MIN_CUP, RATE_MIN) y (THRESHOLD_CUP, RATE_MAX)
      const slope = (RATE_MAX - RATE_MIN) / (THRESHOLD_CUP - MIN_CUP);
      return RATE_MIN + slope * (cup - MIN_CUP);
    }

    // Convierte de CUP a ARS aplicando la tasa correcta
    function cupToArs(cup) {
      const tasa = rateForCup(cup);
      return cup * tasa;
    }

    // Convierte de ARS a CUP: buscamos el cup tal que cupToArs(cup) ‚âà ars
    function arsToCup(ars) {
      // Si el ARS > valor en ARS al umbral, devolvemos directamente THRESHOLD_CUP + algo
      if (ars >= THRESHOLD_ARS) {
        // Cup m√≠nimo para THRESHOLD_ARS es 100.000, pero puede ser m√°s
        return Math.floor(ars / RATE_MAX);
      }
      // Para ars < THRESHOLD_ARS, usamos b√∫squeda binaria entre MIN_CUP y THRESHOLD_CUP
      let low = MIN_CUP, high = THRESHOLD_CUP, mid, estimate;
      for (let i = 0; i < 50; i++) {
        mid = (low + high) / 2;
        estimate = cupToArs(mid);
        if (estimate > ars) {
          high = mid;
        } else {
          low = mid;
        }
      }
      return mid;
    }

    function calculate() {
      const direction = document.getElementById('direction').value;
      const amtInput = parseFloat(document.getElementById('amount').value);
      const resultDiv = document.getElementById('resultText');
      resultDiv.textContent = '';

      if (direction === 'arsToCup') {
        const ars = amtInput;
        if (isNaN(ars) || ars < MIN_ARS) {
          resultDiv.textContent = 
            `Por favor ingrese un valor de ARS ‚â• ${MIN_ARS.toLocaleString()}.`;
          return;
        }
        // No hay l√≠mite superior: a partir de 363.000 ARS se usa tasa fija RATE_MAX
        const cup = arsToCup(ars);
        resultDiv.textContent = 
          `üí≤ Con ${ars.toLocaleString()} ARS recib√≠s aprox. ${Math.round(cup).toLocaleString()} CUP.`;
      }
      else { // cupToArs
        const cup = amtInput;
        if (isNaN(cup) || cup < MIN_CUP) {
          resultDiv.textContent = 
            `Por favor ingrese un valor de CUP ‚â• ${MIN_CUP.toLocaleString()}.`;
          return;
        }
        // Si cup > 100.000, se usa tasa RATE_MAX
        const ars = cupToArs(cup);
        resultDiv.textContent = 
          `üí≤ Recib√≠s aprox ${cup.toLocaleString()} CUP con. ${Math.round(ars).toLocaleString()} ARS.`;
      }
    }
  </script>

</body>
</html>
